<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="SMS">
	<resultMap id="ResultMap" type="SMS" >
		<result column="sendId" property="sendId"/>
		<result column="recvId" property="recvId"/>
		<result column="content" property="content"/>
		<result column="sendDate" property="sendDate"/>
		<result column="image" property="image"/>
		<result column="read" property="read"/>
		<result column="deleted" property="deleted"/>
	</resultMap>
	
<!-- selectSMS -->

	<select id="newSMS" parameterType="integer" resultType="integer">
		select count(*) from SMS where recvId=#{recvId} and read='0'
	</select>

<!-- listNewSenders : 새 메세지를 보낸 발신자들의 리스트를 조회 -->	
	<select id="listNewSenders" parameterType="integer" resultMap="ResultMap">
		select distinct sendId from SMS where recvId=#{recvId} and read='0'
	</select>
	
	<select id="listNewSMS" parameterType="integer" resultMap="ResultMap">
		select * from SMS where recvId=#{recvId} and deleted='0' and read='0'
	</select>

	
</mapper>